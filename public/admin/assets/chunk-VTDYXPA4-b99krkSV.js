import{I as qe}from"./chunk-PYIO3TDQ-D8Zv8hXV.js";import{g as T}from"./chunk-PDWBYQOW-BedvhUOI.js";import{D as Ke,I as le,h as me,e as Ge,f as He,g as Be,a as fe}from"./chunk-53RYGJCD-Bajsw3kI.js";import{c as Ue}from"./chunk-MWVM4TYO-bKUcYSnf.js";import{c as w}from"./chunk-6GU6IDUA-CDc7wW5L.js";import{K as We}from"./chunk-6HTZNHPT-Dc0hlteH.js";import{S as A}from"./chunk-4TC5YS65-xDOhCVGs.js";import{r as f,cP as Xe,bB as Ye,eG as he,aM as _,j as t,bQ as ge,bE as Qe,b_ as Ze,bG as Je,bF as xe,bS as et,b7 as tt,b8 as nt,b9 as st,a2 as B,ae as Y,a4 as F,af as S,bn as M,ad as ve,ao as be,b as $,cC as ot,a8 as it,a9 as rt,y as at,w as y,H as lt,T as q,B as Q,m as je,I as te,b4 as ct,D as k,W as dt,X as ut,v as z,V as pt,bc as mt,z as Z,Y as I,C as ft}from"./index-BjTCS_8B.js";import{f as se,C as ht}from"./index.esm-Bkn7sssU.js";import{X as gt}from"./x-mark-mini-e4cPI5_N.js";import{T as J}from"./Trans-Cv806srN.js";import{C as V}from"./currency-input-BTjm4Etm.js";var xt=Object.defineProperty,K=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,ce=(e,s,n)=>s in e?xt(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,vt=(e,s)=>{for(var n in s)Ce.call(s,n)&&ce(e,n,s[n]);if(K)for(var n of K(s))ye.call(s,n)&&ce(e,n,s[n]);return e},bt=(e,s)=>{var n={};for(var o in e)Ce.call(e,o)&&s.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&K)for(var o of K(e))s.indexOf(o)<0&&ye.call(e,o)&&(n[o]=e[o]);return n};const _e=f.forwardRef((e,s)=>{var n=e,{color:o="currentColor"}=n,i=bt(n,["color"]);return f.createElement("svg",vt({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:s},i),f.createElement("path",{stroke:o,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.056 1.944h4v4M13.056 1.944l-4 4M1.944 9.056v4h4M1.944 13.056l4-4"}))});_e.displayName="ArrowsPointingOut";var jt=Object.defineProperty,G=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable,de=(e,s,n)=>s in e?jt(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,Ct=(e,s)=>{for(var n in s)we.call(s,n)&&de(e,n,s[n]);if(G)for(var n of G(s))Pe.call(s,n)&&de(e,n,s[n]);return e},yt=(e,s)=>{var n={};for(var o in e)we.call(e,o)&&s.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&G)for(var o of G(e))s.indexOf(o)<0&&Pe.call(e,o)&&(n[o]=e[o]);return n};const Ne=f.forwardRef((e,s)=>{var n=e,{color:o="currentColor"}=n,i=yt(n,["color"]);return f.createElement("svg",Ct({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:s},i),f.createElement("path",{stroke:o,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7.5 13.945a6.444 6.444 0 1 0 0-12.89 6.444 6.444 0 0 0 0 12.89M8.167 5.5h2.666M4.167 5.5h1.777M5.944 3.944v3.111M9.056 9.5h1.777M4.167 9.5h2.666M9.056 7.944v3.111"}))});Ne.displayName="CircleSliders";var P="Accordion",_t=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[oe,wt,Pt]=Xe(P),[U,pn]=Ye(P,[Pt,he]),ie=he(),Oe=_.forwardRef((e,s)=>{const{type:n,...o}=e,i=o,a=o;return t.jsx(oe.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?t.jsx(It,{...a,ref:s}):t.jsx(At,{...i,ref:s})})});Oe.displayName=P;var[Ae,Nt]=U(P),[Ie,Ot]=U(P,{collapsible:!1}),At=_.forwardRef((e,s)=>{const{value:n,defaultValue:o,onValueChange:i=()=>{},collapsible:a=!1,...r}=e,[l,c]=ge({prop:n,defaultProp:o,onChange:i});return t.jsx(Ae,{scope:e.__scopeAccordion,value:l?[l]:[],onItemOpen:c,onItemClose:_.useCallback(()=>a&&c(""),[a,c]),children:t.jsx(Ie,{scope:e.__scopeAccordion,collapsible:a,children:t.jsx(Re,{...r,ref:s})})})}),It=_.forwardRef((e,s)=>{const{value:n,defaultValue:o,onValueChange:i=()=>{},...a}=e,[r=[],l]=ge({prop:n,defaultProp:o,onChange:i}),c=_.useCallback(p=>l((u=[])=>[...u,p]),[l]),d=_.useCallback(p=>l((u=[])=>u.filter(m=>m!==p)),[l]);return t.jsx(Ae,{scope:e.__scopeAccordion,value:r,onItemOpen:c,onItemClose:d,children:t.jsx(Ie,{scope:e.__scopeAccordion,collapsible:!0,children:t.jsx(Re,{...a,ref:s})})})}),[Rt,W]=U(P),Re=_.forwardRef((e,s)=>{const{__scopeAccordion:n,disabled:o,dir:i,orientation:a="vertical",...r}=e,l=_.useRef(null),c=Qe(l,s),d=wt(n),u=Ze(i)==="ltr",m=Je(e.onKeyDown,h=>{var E;if(!_t.includes(h.key))return;const g=h.target,b=d().filter(L=>{var ae;return!((ae=L.ref.current)!=null&&ae.disabled)}),C=b.findIndex(L=>L.ref.current===g),R=b.length;if(C===-1)return;h.preventDefault();let j=C;const x=0,N=R-1,v=()=>{j=C+1,j>N&&(j=x)},O=()=>{j=C-1,j<x&&(j=N)};switch(h.key){case"Home":j=x;break;case"End":j=N;break;case"ArrowRight":a==="horizontal"&&(u?v():O());break;case"ArrowDown":a==="vertical"&&v();break;case"ArrowLeft":a==="horizontal"&&(u?O():v());break;case"ArrowUp":a==="vertical"&&O();break}const X=j%R;(E=b[X].ref.current)==null||E.focus()});return t.jsx(Rt,{scope:n,disabled:o,direction:i,orientation:a,children:t.jsx(oe.Slot,{scope:n,children:t.jsx(xe.div,{...r,"data-orientation":a,ref:c,onKeyDown:o?void 0:m})})})}),H="AccordionItem",[St,re]=U(H),Se=_.forwardRef((e,s)=>{const{__scopeAccordion:n,value:o,...i}=e,a=W(H,n),r=Nt(H,n),l=ie(n),c=et(),d=o&&r.value.includes(o)||!1,p=a.disabled||e.disabled;return t.jsx(St,{scope:n,open:d,disabled:p,triggerId:c,children:t.jsx(tt,{"data-orientation":a.orientation,"data-state":Me(d),...l,...i,ref:s,disabled:p,open:d,onOpenChange:u=>{u?r.onItemOpen(o):r.onItemClose(o)}})})});Se.displayName=H;var ke="AccordionHeader",kt=_.forwardRef((e,s)=>{const{__scopeAccordion:n,...o}=e,i=W(P,n),a=re(ke,n);return t.jsx(xe.h3,{"data-orientation":i.orientation,"data-state":Me(a.open),"data-disabled":a.disabled?"":void 0,...o,ref:s})});kt.displayName=ke;var ne="AccordionTrigger",Ee=_.forwardRef((e,s)=>{const{__scopeAccordion:n,...o}=e,i=W(P,n),a=re(ne,n),r=Ot(ne,n),l=ie(n);return t.jsx(oe.ItemSlot,{scope:n,children:t.jsx(nt,{"aria-disabled":a.open&&!r.collapsible||void 0,"data-orientation":i.orientation,id:a.triggerId,...l,...o,ref:s})})});Ee.displayName=ne;var Le="AccordionContent",Te=_.forwardRef((e,s)=>{const{__scopeAccordion:n,...o}=e,i=W(P,n),a=re(Le,n),r=ie(n);return t.jsx(st,{role:"region","aria-labelledby":a.triggerId,"data-orientation":i.orientation,...r,...o,ref:s,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});Te.displayName=Le;function Me(e){return e?"open":"closed"}var Et=Oe,Lt=Se,Tt=Ee,Mt=Te,Vt=(e,s,n)=>({attribute:e,operator:s,value:w(n)}),mn=e=>[{value:e.gte,operator:"gte"},{value:e.lte,operator:"lte"},{value:e.gt,operator:"gt"},{value:e.lt,operator:"lt"},{value:e.eq,operator:"eq"}].filter(({value:o})=>o).map(({operator:o,value:i})=>Vt(qe,o,i)),Ve=B({amount:Y([F(),S()]),gte:Y([F(),S()]).nullish(),lte:Y([F(),S()]).nullish(),lt:S().nullish(),gt:S().nullish(),eq:S().nullish()}).refine(e=>e.amount!=="",{message:M("stockLocations.shippingOptions.conditionalPrices.errors.amountRequired"),path:["amount"]}).refine(e=>e.eq!==void 0||e.lt!==void 0||e.gt!==void 0?!0:e.gte!==void 0&&e.gte!==""||e.lte!==void 0&&e.lte!=="",{message:M("stockLocations.shippingOptions.conditionalPrices.errors.minOrMaxRequired"),path:["gte"]}).refine(e=>{if(e.gte!=null&&e.gte!==""&&e.lte!=null&&e.lte!==""){const s=w(e.gte),n=w(e.lte);return s<=n}return!0},{message:M("stockLocations.shippingOptions.conditionalPrices.errors.minGreaterThanMax"),path:["gte"]}),Dt=Ve.and(B({id:F().optional()}));function De(e,s){const n=e.prices;for(let o=0;o<n.length;o++)for(let i=o+1;i<n.length;i++){const a=n[o],r=n[i];if(a.amount===""||r.amount==="")continue;const l=w(a.amount),c=w(r.amount);l===c&&Ft(s,i),[{value:a.gte,type:"gte"},{value:a.lte,type:"lte"},{value:a.eq,type:"eq"},{value:a.lt,type:"lt"},{value:a.gt,type:"gt"}].forEach(p=>{if(!p.value&&p.value!==0)return;[{value:r.gte,type:"gte"},{value:r.lte,type:"lte"},{value:r.eq,type:"eq"},{value:r.lt,type:"lt"},{value:r.gt,type:"gt"}].forEach(m=>{if(!m.value&&m.value!==0)return;const h=w(p.value),g=w(m.value);h===g&&qt(s,i,m.type)})})}}var zt=B({prices:ve(Ve)}).superRefine(De),$t=B({prices:ve(Dt)}).superRefine(De),Ft=(e,s)=>{e.addIssue({code:be.custom,message:M("stockLocations.shippingOptions.conditionalPrices.errors.duplicateAmount"),path:["prices",s,"amount"]})},qt=(e,s,n)=>{e.addIssue({code:be.custom,message:M("stockLocations.shippingOptions.conditionalPrices.errors.overlappingConditions"),path:["prices",s,n]})},ze=f.createContext(null),fn=({children:e,onOpenConditionalPricesModal:s,onCloseConditionalPricesModal:n})=>t.jsx(ze.Provider,{value:{onOpenConditionalPricesModal:s,onCloseConditionalPricesModal:n},children:e}),$e=()=>{const e=f.useContext(ze);if(!e)throw new Error("useShippingOptionPrice must be used within a ShippingOptionPriceProvider");return e},Fe=(e,s)=>{const n=s==="region"?"region_prices":"currency_prices",o=s==="region"?"conditional_region_prices":"conditional_currency_prices";return e.replace(n,o)},Kt="rule-item",D=e=>`${Kt}-${e}`,hn=({info:e,variant:s})=>{const{t:n}=$(),{getValues:o,setValue:i}=ot(),{onCloseConditionalPricesModal:a}=$e(),[r,l]=f.useState([D(0)]),{field:c,type:d,currency:p,name:u}=e,m=Fe(c,d),h=it({defaultValues:{prices:o(m)||[{amount:"",gte:"",lte:null}]},resolver:rt(s==="create"?zt:$t)}),{fields:g,append:b,remove:C}=at({control:h.control,name:"prices"}),R=()=>{b({amount:"",gte:"",lte:null}),l([...r,D(g.length)])},j=v=>{C(v)},x=h.handleSubmit(v=>{i(m,v.prices,{shouldDirty:!0,shouldValidate:!0,shouldTouch:!0}),a()},v=>{const O=Object.keys(v.prices||{});l(X=>{const E=new Set(X);return O.forEach(L=>{E.add(D(Number(L)))}),Array.from(E)})}),N=v=>{v.key==="Enter"&&(v.metaKey||v.ctrlKey)&&(console.log("Fired"),v.preventDefault(),v.stopPropagation(),x())};return t.jsx(y,{...h,children:t.jsx(We,{onSubmit:x,onKeyDown:N,className:"flex h-full flex-col",children:t.jsxs(A.Content,{children:[t.jsx(A.Header,{}),t.jsx(A.Body,{className:"size-full overflow-hidden",children:t.jsx("div",{className:"flex size-full flex-1 flex-col items-center overflow-y-auto",children:t.jsx("div",{className:"flex w-full max-w-[720px] flex-col gap-y-8 px-6 py-16",children:t.jsxs("div",{className:"flex w-full flex-col gap-y-6",children:[t.jsxs("div",{children:[t.jsx(A.Title,{asChild:!0,children:t.jsx(lt,{children:n("stockLocations.shippingOptions.conditionalPrices.header",{name:u})})}),t.jsx(A.Description,{asChild:!0,children:t.jsx(q,{size:"small",className:"text-ui-fg-subtle",children:n("stockLocations.shippingOptions.conditionalPrices.description")})})]}),t.jsx(Gt,{value:r,onValueChange:l,children:g.map((v,O)=>t.jsx(Ht,{index:O,onRemove:j,currency:p,control:h.control},v.id))}),t.jsx("div",{className:"flex items-center justify-end",children:t.jsx(Q,{variant:"secondary",size:"small",type:"button",onClick:R,children:n("stockLocations.shippingOptions.conditionalPrices.actions.addPrice")})})]})})})}),t.jsx(A.Footer,{children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx(A.Close,{asChild:!0,children:t.jsx(Q,{variant:"secondary",size:"small",type:"button",children:n("actions.cancel")})}),t.jsx(Q,{size:"small",type:"button",onClick:x,children:n("actions.save")})]})})]})})})},Gt=({children:e,value:s,onValueChange:n})=>t.jsx(Et,{type:"multiple",defaultValue:[D(0)],value:s,onValueChange:n,className:"flex flex-col gap-y-3",children:e}),Ht=({index:e,currency:s,onRemove:n,control:o})=>{const{t:i}=$(),a=r=>{r.stopPropagation(),n(e)};return t.jsxs(Lt,{value:D(e),className:je("bg-ui-bg-component shadow-elevation-card-rest rounded-lg"),children:[t.jsx(Tt,{asChild:!0,children:t.jsxs("div",{className:"group/trigger flex w-full cursor-pointer items-start justify-between gap-x-2 p-3",children:[t.jsxs("div",{className:"flex flex-1 flex-wrap items-center justify-between gap-2",children:[t.jsx("div",{className:"flex h-7 items-center",children:t.jsx(Ut,{index:e,currency:s,control:o})}),t.jsx("div",{className:"flex min-h-7 items-center",children:t.jsx(Wt,{index:e,currency:s,control:o})})]}),t.jsxs("div",{className:"flex items-center gap-x-2",children:[t.jsx(te,{size:"small",variant:"transparent",className:"text-ui-fg-muted hover:text-ui-fg-subtle focus-visible:text-ui-fg-subtle",onClick:a,children:t.jsx(gt,{})}),t.jsx(te,{size:"small",variant:"transparent",className:"text-ui-fg-muted hover:text-ui-fg-subtle focus-visible:text-ui-fg-subtle",children:t.jsx(ct,{className:"transition-transform group-data-[state=open]/trigger:rotate-180"})})]})]})}),t.jsxs(Mt,{className:"text-ui-fg-subtle",children:[t.jsx(k,{variant:"dashed"}),t.jsx(y.Field,{control:o,name:`prices.${e}.amount`,render:({field:{value:r,onChange:l,...c}})=>t.jsx(y.Item,{children:t.jsxs("div",{className:"grid grid-cols-2 items-start gap-x-2 p-3",children:[t.jsx("div",{className:"flex h-8 items-center",children:t.jsx(y.Label,{children:i("stockLocations.shippingOptions.conditionalPrices.rules.amount")})}),t.jsxs("div",{className:"flex flex-col gap-y-1",children:[t.jsx(y.Control,{children:t.jsx(V,{className:"bg-ui-bg-field-component hover:bg-ui-bg-field-component-hover focus-visible:bg-ui-bg-field-component-hover",placeholder:se({value:"0",decimalScale:s.decimal_digits}),decimalScale:s.decimal_digits,symbol:s.symbol_native,code:s.code,value:r,onValueChange:(d,p,u)=>l(u!=null&&u.value?u==null?void 0:u.value:""),autoFocus:!0,...c})}),t.jsx(y.ErrorMessage,{})]})]})})}),t.jsx(k,{variant:"dashed"}),t.jsx(y.Field,{control:o,name:`prices.${e}.gte`,render:({field:r})=>t.jsx(ue,{field:r,label:i("stockLocations.shippingOptions.conditionalPrices.rules.gte"),currency:s,placeholder:"1000"})}),t.jsx(k,{variant:"dashed"}),t.jsx(y.Field,{control:o,name:`prices.${e}.lte`,render:({field:r})=>t.jsx(ue,{field:r,label:i("stockLocations.shippingOptions.conditionalPrices.rules.lte"),currency:s,placeholder:"1000"})}),t.jsx(Bt,{index:e,control:o,currency:s})]})]})},ue=({field:e,label:s,currency:n,placeholder:o})=>{const i=f.useRef(null),{value:a,onChange:r,ref:l,...c}=e,d=me(i,l),p=()=>{if(a===null){r(""),requestAnimationFrame(()=>{var m;(m=i.current)==null||m.focus()});return}r(null)},u=a===null;return t.jsx(y.Item,{children:t.jsxs("div",{className:"grid grid-cols-2 items-start gap-x-2 p-3",children:[t.jsxs("div",{className:"flex h-8 items-center gap-x-1",children:[t.jsx(te,{size:"2xsmall",variant:"transparent",onClick:p,children:u?t.jsx(dt,{}):t.jsx(ut,{})}),t.jsx(y.Label,{children:s})]}),!u&&t.jsxs("div",{className:"flex flex-col gap-y-1",children:[t.jsx(y.Control,{children:t.jsx(V,{className:"bg-ui-bg-field-component hover:bg-ui-bg-field-component-hover focus-visible:bg-ui-bg-field-component-hover",placeholder:se({value:o,decimalScale:n.decimal_digits}),decimalScale:n.decimal_digits,symbol:n.symbol_native,code:n.code,value:a,ref:d,onValueChange:(m,h,g)=>r(g!=null&&g.value?g==null?void 0:g.value:""),...c})}),t.jsx(y.ErrorMessage,{})]})]})})},Bt=({index:e,control:s,currency:n})=>{const{t:o}=$(),i=z({control:s,name:`prices.${e}`});return i.eq==null&&i.gt==null&&i.lt==null?null:t.jsxs("div",{children:[t.jsx(k,{variant:"dashed"}),t.jsxs("div",{className:"flex items-center gap-x-1 px-3 pt-3",children:[t.jsx(q,{size:"small",leading:"compact",weight:"plus",children:o("stockLocations.shippingOptions.conditionalPrices.customRules.label")}),t.jsx(pt,{content:o("stockLocations.shippingOptions.conditionalPrices.customRules.tooltip"),children:t.jsx(mt,{className:"text-ui-fg-muted"})})]}),t.jsxs("div",{children:[i.eq!=null&&t.jsxs("div",{className:"grid grid-cols-2 items-start gap-x-2 p-3",children:[t.jsx("div",{className:"flex h-8 items-center",children:t.jsx(Z,{weight:"plus",size:"small",children:o("stockLocations.shippingOptions.conditionalPrices.customRules.eq")})}),t.jsx(V,{className:"bg-ui-bg-field-component hover:bg-ui-bg-field-component-hover focus-visible:bg-ui-bg-field-component-hover",symbol:n.symbol_native,code:n.code,value:i.eq,disabled:!0})]}),i.gt!=null&&t.jsxs(f.Fragment,{children:[t.jsx(k,{variant:"dashed"}),t.jsxs("div",{className:"grid grid-cols-2 items-start gap-x-2 p-3",children:[t.jsx("div",{className:"flex h-8 items-center",children:t.jsx(Z,{weight:"plus",size:"small",children:o("stockLocations.shippingOptions.conditionalPrices.customRules.gt")})}),t.jsx(V,{className:"bg-ui-bg-field-component hover:bg-ui-bg-field-component-hover focus-visible:bg-ui-bg-field-component-hover",symbol:n.symbol_native,code:n.code,value:i.gt,disabled:!0})]})]}),i.lt!=null&&t.jsxs(f.Fragment,{children:[t.jsx(k,{variant:"dashed"}),t.jsxs("div",{className:"grid grid-cols-2 items-start gap-x-2 p-3",children:[t.jsx("div",{className:"flex h-8 items-center",children:t.jsx(Z,{weight:"plus",size:"small",children:o("stockLocations.shippingOptions.conditionalPrices.customRules.lt")})}),t.jsx(V,{className:"bg-ui-bg-field-component hover:bg-ui-bg-field-component-hover focus-visible:bg-ui-bg-field-component-hover",symbol:n.symbol_native,code:n.code,value:i.lt,disabled:!0})]})]})]})]})},Ut=({index:e,currency:s,control:n})=>{const o=z({control:n,name:`prices.${e}.amount`});if(o===""||o===void 0)return t.jsx(q,{size:"small",weight:"plus",children:"-"});const i=w(o);return t.jsx(q,{size:"small",weight:"plus",children:T(i,s.code)})},ee=({children:e})=>t.jsx("div",{className:"text-ui-fg-subtle txt-small flex flex-wrap items-center gap-1.5",children:e}),Wt=({index:e,currency:s,control:n})=>{const{t:o,i18n:i}=$(),a=z({control:n,name:`prices.${e}.gte`}),r=z({control:n,name:`prices.${e}.lte`});return(()=>{const c=a?w(a):void 0,d=r?w(r):void 0;return!c&&!d?null:c&&!d?t.jsx(ee,{children:t.jsx(J,{i18n:i,i18nKey:"stockLocations.shippingOptions.conditionalPrices.summaries.greaterThan",components:[t.jsx(I,{size:"2xsmall"},"attribute"),t.jsx(I,{size:"2xsmall"},"gte")],values:{attribute:o("stockLocations.shippingOptions.conditionalPrices.attributes.cartItemTotal"),gte:T(c,s.code)}})}):!c&&d?t.jsx(ee,{children:t.jsx(J,{i18n:i,i18nKey:"stockLocations.shippingOptions.conditionalPrices.summaries.lessThan",components:[t.jsx(I,{size:"2xsmall"},"attribute"),t.jsx(I,{size:"2xsmall"},"lte")],values:{attribute:o("stockLocations.shippingOptions.conditionalPrices.attributes.cartItemTotal"),lte:T(d,s.code)}})}):c&&d?t.jsx(ee,{children:t.jsx(J,{i18n:i,i18nKey:"stockLocations.shippingOptions.conditionalPrices.summaries.range",components:[t.jsx(I,{size:"2xsmall"},"attribute"),t.jsx(I,{size:"2xsmall"},"gte"),t.jsx(I,{size:"2xsmall"},"lte")],values:{attribute:o("stockLocations.shippingOptions.conditionalPrices.attributes.cartItemTotal"),gte:T(c,s.code),lte:T(d,s.code)}})}):null})()},pe=({context:e,code:s,header:n,type:o})=>{const[i,a]=f.useState(0),r=f.useCallback(b=>{if(b){const C=b.offsetWidth;a(C)}},[]),{field:l,control:c,renderProps:d}=Ge({context:e}),p=He({context:e}),{container:u,input:m}=d,{isAnchor:h}=u,g=Ue[s.toUpperCase()];return t.jsx(ft,{control:c,name:l,render:({field:b})=>t.jsx(Be,{...u,...p,outerComponent:t.jsx(Xt,{header:n,isAnchor:h,field:l,control:c,symbolWidth:i,type:o,currency:g}),children:t.jsx(Yt,{field:b,inputProps:m,currencyInfo:g,onMeasureSymbol:r})})})},Xt=({isAnchor:e,header:s,field:n,control:o,symbolWidth:i,type:a,currency:r})=>{const{onOpenConditionalPricesModal:l}=$e(),c=f.useRef(null),d=Fe(n,a),p=z({control:o,name:d});return f.useEffect(()=>{const u=m=>{var h;e&&(m.metaKey||m.ctrlKey)&&m.key.toLowerCase()==="b"&&(m.preventDefault(),(h=c.current)==null||h.click())};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[e]),t.jsxs("div",{className:"absolute inset-y-0 z-[3] flex w-fit items-center justify-center",style:{left:i?`${i+16+4}px`:void 0},children:[(p==null?void 0:p.length)>0&&!e&&t.jsx("div",{className:"flex size-[15px] items-center justify-center group-hover/container:hidden",children:t.jsx(Ne,{className:"text-ui-fg-interactive"})}),t.jsx("button",{ref:c,type:"button",className:je("hover:text-ui-fg-subtle text-ui-fg-muted transition-fg hidden size-[15px] items-center justify-center rounded-md bg-transparent group-hover/container:flex",{flex:e}),onClick:()=>l({type:a,field:n,currency:r,name:s}),children:t.jsx(_e,{})})]})},Yt=({field:e,onMeasureSymbol:s,inputProps:n,currencyInfo:o})=>{const{value:i,onChange:a,onBlur:r,ref:l,...c}=e,{ref:d,onBlur:p,onFocus:u,onChange:m,...h}=n,g=f.useCallback(x=>{const N=typeof x=="number"?x.toString():x||"";return se({value:N,decimalScale:o.decimal_digits,disableGroupSeparators:!0,decimalSeparator:"."})},[o]),[b,C]=f.useState(i||""),R=(x,N,v)=>{if(!x){C("");return}C(x)};f.useEffect(()=>{let x=i;isNaN(Number(i))||(x=g(x)),C(x)},[i,g]);const j=me(d,l);return t.jsxs("div",{className:"relative flex size-full items-center",children:[t.jsx("span",{className:"txt-compact-small text-ui-fg-muted pointer-events-none absolute left-0 w-fit min-w-4","aria-hidden":!0,ref:s,children:o.symbol_native}),t.jsx(ht,{...c,...h,ref:j,className:"txt-compact-small w-full flex-1 cursor-default appearance-none bg-transparent pl-[60px] text-right outline-none",value:b||void 0,onValueChange:R,formatValueOnBlur:!0,onBlur:()=>{r(),p(),m(b,i)},onFocus:u,decimalScale:o.decimal_digits,decimalsLimit:o.decimal_digits,autoComplete:"off",tabIndex:-1})]})},Qt=fe(),gn=({name:e,currencies:s=[],regions:n=[],pricePreferences:o=[]})=>{const{t:i}=$();return f.useMemo(()=>[Qt.column({id:"name",name:i("fields.name"),disableHiding:!0,header:i("fields.name"),cell:a=>t.jsx(Ke.ReadonlyCell,{context:a,children:e})}),...Zt({currencies:s,regions:n,pricePreferences:o,getFieldName:(a,r)=>{var l;return(l=a.column.id)!=null&&l.startsWith("currency_prices")?`currency_prices.${r}`:`region_prices.${r}`},t:i})],[i,s,n,o,e])},Zt=({currencies:e,regions:s,pricePreferences:n,getFieldName:o,t:i})=>{const a=fe();return[...(e==null?void 0:e.map(r=>{const l=n==null?void 0:n.find(d=>d.attribute==="currency_code"&&d.value===r),c=i("fields.priceTemplate",{regionOrCurrency:r.toUpperCase()});return a.column({id:`currency_prices.${r}`,name:i("fields.priceTemplate",{regionOrCurrency:r.toUpperCase()}),field:d=>o(d,r),type:"number",header:()=>t.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[t.jsx("span",{className:"truncate",title:c,children:c}),t.jsx(le,{includesTax:l==null?void 0:l.is_tax_inclusive})]}),cell:d=>t.jsx(pe,{type:"currency",header:c,code:r,context:d})})}))??[],...(s==null?void 0:s.map(r=>{const l=n==null?void 0:n.find(d=>d.attribute==="region_id"&&d.value===r.id),c=i("fields.priceTemplate",{regionOrCurrency:r.name});return a.column({id:`region_prices.${r.id}`,name:i("fields.priceTemplate",{regionOrCurrency:r.name}),field:d=>o(d,r.id),type:"number",header:()=>t.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[t.jsx("span",{className:"truncate",title:c,children:c}),t.jsx(le,{includesTax:l==null?void 0:l.is_tax_inclusive})]}),cell:d=>(e==null?void 0:e.find(u=>u===r.currency_code))?t.jsx(pe,{type:"region",header:c,code:r.currency_code,context:d}):null})}))??[]]};export{Ve as C,fn as S,Dt as U,hn as a,mn as b,gn as u};
